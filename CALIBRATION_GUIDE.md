# Руководство по калибровке Head-Tracked 3D Window

## Одна камера - это нормально!

**Да, это можно сделать с одной камерой** (как в оригинальном видео Johnny Chung Lee). Мы используем MediaPipe FaceLandmarker, который работает с одной фронтальной камерой MacBook.

## Калибровка для точной реакции

### 1. Физические размеры экрана

Измерьте ваш экран в сантиметрах:
- **Screen Width**: ширина экрана (по умолчанию 30.4cm для MacBook 13")
- **Screen Height**: высота экрана (по умолчанию 19.7cm для MacBook 13")

### 2. Расстояние до экрана

- **Distance (cm)**: ваше обычное расстояние от глаз до экрана
- По умолчанию: 60cm
- Настройте так, чтобы при движении головы эффект был наиболее заметен

### 3. Настройка чувствительности

- **Tracking Strength** (0-2): 
  - 1.0 = нормальная чувствительность
  - 1.5-2.0 = более сильная реакция (для больших экранов)
  - 0.5-0.8 = более плавная реакция

- **Smoothing** (0-0.95):
  - 0.7 = хороший баланс (по умолчанию)
  - 0.5 = более быстрая реакция, но может быть дрожание
  - 0.9 = очень плавно, но медленная реакция

### 4. Процесс калибровки

1. Сядьте на обычном расстоянии от экрана (60cm)
2. Нажмите "Enable Camera"
3. Посмотрите прямо на экран
4. Нажмите "Reset Calibration" (R) - это установит текущую позицию как центр
5. Медленно двигайте головой влево/вправо/вверх/вниз
6. Настройте **Tracking Strength** так, чтобы реакция была заметной, но не слишком резкой
7. Если эффект слабый - увеличьте Tracking Strength до 1.5-2.0

### 5. Устранение проблем

**Реакция слишком слабая:**
- Увеличьте Tracking Strength до 1.5-2.0
- Уменьшите Smoothing до 0.5-0.6
- Проверьте, что камера видит ваше лицо (включите Debug overlay)

**Реакция слишком резкая/дрожащая:**
- Уменьшите Tracking Strength до 0.5-0.8
- Увеличьте Smoothing до 0.8-0.9

**Эффект не работает:**
- Убедитесь, что размеры экрана правильные
- Проверьте расстояние до экрана
- Попробуйте Mouse Mode (M) для проверки - если работает мышью, проблема в трекинге

**Камера не работает:**
- Проверьте разрешения браузера на доступ к камере
- Используйте Mouse Mode (M) для тестирования
- Убедитесь, что камера не используется другим приложением

## Технические детали

### Как работает трекинг с одной камерой

MediaPipe FaceLandmarker определяет:
- **X/Y позицию**: из центра лица (между глазами и носом)
- **Z расстояние**: из межзрачкового расстояния (IPD)
- **Поворот**: из ориентации лица

Off-axis projection использует эти данные для построения перспективы "окна в 3D".

### Оптимальные настройки для MacBook

```typescript
screenWidthCm: 30.4
screenHeightCm: 19.7
viewerDistanceCm: 60
trackingStrength: 1.2-1.5
smoothing: 0.7
```

## Советы

1. **Освещение**: Убедитесь, что ваше лицо хорошо освещено
2. **Позиция**: Сидите прямо, лицо на уровне камеры
3. **Расстояние**: Оптимально 50-70cm от экрана
4. **Движения**: Начните с медленных движений для проверки реакции

# Исследование Fish Tank VR

## Найденные проекты и решения

### 1. Технические реализации

#### WebGL Aquarium (meghprkh/webgl-aquarium)
- **Технологии**: WebGL, Three.js
- **Особенности**:
  - Реалистичное освещение
  - Отражения на стекле и металле
  - Пузырьки и эффекты воды
  - Различные виды рыб
- **Что можно взять**: Техники освещения и отражений для более реалистичного вида

#### Fishtank by mrd (Haskell/OpenGL)
- **Технологии**: Haskell, OpenGL
- **Особенности**:
  - Поведение рыб на основе модели "Boids"
  - Стайное поведение
  - Отношения хищник/жертва
  - Интерактивность (кормление, изменение угла обзора)
- **Что можно взять**: Алгоритмы поведения рыб для более реалистичной анимации

### 2. Научные подходы

#### Fish Tank VR
- **Концепция**: Экран как "стекло аквариума", через которое пользователь смотрит на виртуальные объекты
- **Ключевые принципы**:
  - Перспектива изменяется в соответствии с положением головы
  - Высококачественная графика
  - Интеграция виртуальной среды с рабочим пространством

### 3. Рекомендации для улучшения реалистичности

#### A. Визуальные улучшения

1. **Освещение и отражения**
   - Добавить отражения на "стекле" экрана (screen-space reflections)
   - Реалистичное освещение сцены (ambient, directional, point lights)
   - Преломления для эффекта "воды"

2. **Эффекты воды**
   - Каустика (caustics) - световые эффекты на дне
   - Пузырьки воздуха
   - Волны и течения (если применимо)

3. **Детализация сцены**
   - Более детализированные текстуры
   - Партиклы (пыль, частицы в воздухе)
   - Пост-обработка (bloom, color grading)

#### B. Поведение объектов

1. **Алгоритм Boids для анимации**
   - Стайное поведение
   - Избегание препятствий
   - Реакция на пользователя

2. **Физика**
   - Реалистичное движение объектов
   - Гравитация и инерция
   - Столкновения

#### C. Технические улучшения

1. **Оптимизация рендеринга**
   - Level of Detail (LOD) для объектов
   - Frustum culling
   - Occlusion culling
   - Instancing для повторяющихся объектов

2. **Калибровка и трекинг**
   - Более точный трекинг головы (улучшить MediaPipe)
   - Автоматическая калибровка расстояния
   - Компенсация задержки (latency compensation)

3. **Производительность**
   - Web Workers для тяжелых вычислений
   - Оптимизация геометрии (меньше полигонов где возможно)
   - Эффективное использование текстур

#### D. Интерактивность

1. **Взаимодействие с пользователем**
   - Реакция объектов на движение головы
   - Возможность "заглянуть" за объекты
   - Параллакс эффекты

2. **Настройки**
   - Регулировка глубины эффекта
   - Настройка чувствительности трекинга
   - Различные режимы отображения

## Конкретные улучшения для нашего проекта

### Приоритет 1: Визуальные улучшения

1. **Добавить освещение**
   ```typescript
   // В scene.ts добавить:
   - AmbientLight для базового освещения
   - DirectionalLight для основного источника
   - PointLight для акцентов
   ```

2. **Улучшить материалы**
   - Добавить emissive для линий (свечение)
   - Настроить opacity для эффекта глубины
   - Добавить fog для атмосферы

3. **Пост-обработка**
   - Bloom эффект для ярких линий
   - Color correction
   - Vignette для фокуса

### Приоритет 2: Оптимизация трекинга

1. **Улучшить MediaPipe трекинг**
   - Более точное определение расстояния (Z)
   - Фильтрация шума
   - Предсказание движения (prediction)

2. **Калибровка**
   - Автоматическое определение размера экрана
   - Калибровка по маркерам (если возможно)
   - Сохранение калибровки в localStorage

### Приоритет 3: Эффекты

1. **Партиклы**
   - Пыль в воздухе
   - Световые частицы
   - Эффекты глубины

2. **Атмосфера**
   - Fog для создания глубины
   - Цветовая коррекция
   - Градиенты фона

## Полезные ресурсы

1. **WebGL Aquarium**: https://github.com/meghprkh/webgl-aquarium
   - Изучить техники освещения и отражений

2. **Three.js Examples**: 
   - Post-processing effects
   - Lighting techniques
   - Particle systems

3. **Boids Algorithm**:
   - Для реалистичного поведения объектов
   - Стайное движение

4. **Research Papers**:
   - "Fish Tank VR" исследования
   - Off-axis projection техники
   - Look-through display implementations

## Следующие шаги

1. Изучить код webgl-aquarium для техник освещения
2. Реализовать базовое освещение в нашей сцене
3. Добавить fog для атмосферы
4. Улучшить трекинг головы (более точный Z)
5. Добавить пост-обработку (bloom, color correction)
